
<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<title>Bubu-dudu</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{height:100vh;display:grid;place-items:center;overflow:hidden;font-family:system-ui;background: url('./bg.jpg') center/cover no-repeat fixed;}
body::before{content:'';position:fixed;inset:0;background:rgba(0,0,0,.25);}
.card{position:relative;z-index:2;background:rgba(255,255,255,.92);padding:28px;border-radius:22px;text-align:center;width:min(92vw,520px);box-shadow:0 14px 32px rgba(0,0,0,.28);}
h1{font-size:32px;color:#d81b60;margin-bottom:6px}
p{font-size:18px;margin:4px 0}
.caption{color:#c2185b;font-weight:700;min-height:24px;margin-top:6px}
.play{position:relative;height:220px;margin-top:16px}

.heart-btn{position:absolute;width:120px;height:110px;background:none;border:none;cursor:pointer;}
.heart{width:80px;height:80px;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-45deg);background:var(--c);border-radius:16px;box-shadow:0 10px 20px rgba(0,0,0,.25);}
.heart::before,.heart::after{content:'';position:absolute;width:80px;height:80px;background:var(--c);border-radius:50%;}
.heart::before{top:-40px;left:0}
.heart::after{top:0;left:40px}
.label{position:absolute;inset:0;display:grid;place-items:center;font-weight:900;font-size:20px;color:white;text-shadow:0 2px 10px rgba(0,0,0,.4);}
#yes{left:22%;top:55%} #no{left:58%;top:55%}

.float-heart{position:fixed;width:18px;height:18px;background:white;opacity:.85;transform:rotate(-45deg);animation:floating linear forwards;}
.float-heart::before,.float-heart::after{content:'';position:absolute;width:18px;height:18px;background:white;border-radius:50%;}
.float-heart::before{top:-9px;left:0} .float-heart::after{top:0;left:9px}
@keyframes floating{0%{transform:translateY(100vh) rotate(-45deg);opacity:0}10%{opacity:1}100%{transform:translateY(-20vh) rotate(-45deg);opacity:0}}

#confetti{position:fixed;inset:0;pointer-events:none;z-index:30}

#loveWrap{display:none; position:fixed; inset:0; z-index:40; align-items:center; justify-content:center; background:rgba(0,0,0,.35)}
.letter{background:#fff; width:min(92vw,640px); border-radius:20px; padding:22px 20px; box-shadow:0 18px 44px rgba(0,0,0,.25);}
.letter h2{margin:6px 0 8px; color:#c2185b}
.letter p{margin:6px 0; line-height:1.5}
.inputRow{margin-top:12px; display:flex; gap:8px; justify-content:center}
.inputRow input{padding:10px 12px; border-radius:10px; border:1px solid #ffcfe0; width:220px}
.inputRow button{padding:10px 14px; border:none; border-radius:12px; background:#ff4d88; color:#fff; font-weight:800; cursor:pointer}
.secret{display:none; margin-top:12px; font-weight:700; color:#c2185b}

.version-badge{
 position:fixed; right:12px; bottom:10px; z-index:99999;
 background:rgba(255,255,255,.85);
 border:1px solid rgba(255,77,136,.35);
 padding:6px 10px; border-radius:999px;
 font-weight:900; color:#c2185b; font-size:12px;
 box-shadow:0 8px 22px rgba(0,0,0,.12);
}


.spark{
 position:fixed; width:10px; height:10px; border-radius:50%;
 background:rgba(255,255,255,.95);
 box-shadow:0 0 18px rgba(255,255,255,.9);
 pointer-events:none; z-index:99998;
 animation:sparkfly 900ms ease-out forwards;
}
@keyframes sparkfly{
 0%{transform:translate(0,0) scale(1); opacity:1}
 100%{transform:translate(var(--dx), var(--dy)) scale(0.2); opacity:0}
}


/* Envelope animation */
.envelope-stage{display:flex; justify-content:center; margin-top:14px;}
.envelope{
  position:relative;
  width:min(360px, 82vw);
  height:230px;
  filter: drop-shadow(0 14px 28px rgba(0,0,0,.18));
}
.env-back{
  position:absolute; inset:0;
  background:linear-gradient(135deg,#fff,#ffe6f0);
  border-radius:18px;
  border:1px solid rgba(255,77,136,.35);
}
.env-bottom{
  position:absolute; left:0; right:0; bottom:0; height:60%;
  background:linear-gradient(135deg,#ffd1e2,#fff);
  border-radius:0 0 18px 18px;
  clip-path: polygon(0 0, 50% 78%, 100% 0, 100% 100%, 0 100%);
  border-top:1px solid rgba(255,77,136,.22);
}
.env-flap{
  position:absolute; left:0; right:0; top:0; height:62%;
  background:linear-gradient(135deg,#ffb3cc,#ffd6e5);
  border-radius:18px 18px 14px 14px;
  clip-path: polygon(0 0, 50% 78%, 100% 0, 100% 0, 0 0);
  transform-origin: top center;
  transform: rotateX(0deg);
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
  border-bottom:1px solid rgba(255,77,136,.22);
}
.env-heart{
  position:absolute; left:50%; top:52%;
  transform:translate(-50%,-50%);
  width:54px; height:54px;
  background:#ff4d88;
  border-radius:14px;
  transform:translate(-50%,-50%) rotate(-45deg);
  box-shadow:0 10px 20px rgba(0,0,0,.15);
}
.env-heart::before,.env-heart::after{
  content:''; position:absolute; width:54px; height:54px; background:#ff4d88; border-radius:50%;
}
.env-heart::before{top:-27px; left:0}
.env-heart::after{top:0; left:27px}
.letter-sheet{
  position:absolute; left:50%; top:18%;
  transform:translateX(-50%);
  width:92%;
  max-width:520px;
  background:#fff;
  border-radius:16px;
  border:1px solid rgba(255,77,136,.25);
  padding:18px 18px;
  box-shadow:0 18px 44px rgba(0,0,0,.14);
  opacity:0;
  transform:translateX(-50%) translateY(30px) scale(.98);
  transition: opacity 650ms ease, transform 650ms ease;
}
.envelope.open .env-flap{ transform: rotateX(165deg); }
.envelope.open .letter-sheet{
  opacity:1;
  transform:translateX(-50%) translateY(-10px) scale(1);
}
.typed-cursor{
  display:inline-block;
  width:10px;
  margin-left:2px;
  animation: blink 900ms infinite;
}
@keyframes blink{ 0%,49%{opacity:1}50%,100%{opacity:0} }


@media (max-width: 700px){
  body{ background-position: center top; }
}
</style>
</head>
<body>

<audio id="bgMusic" loop preload="auto">
  <source src="./demaina-sakhi.mp3" type="audio/mpeg">
</audio>
<div id="musicToggle" style="position:fixed; left:12px; bottom:10px; z-index:99999;
background:rgba(255,255,255,.9); padding:8px 12px; border-radius:999px;
font-weight:900; color:#c2185b; cursor:pointer; box-shadow:0 8px 22px rgba(0,0,0,.15); user-select:none;">
üéµ Tap to play
</div>

<div class='version-badge'>LOVE-PAGE v8 (Ravi‚ÜíDharani, 16042025)</div>
<canvas id='confetti'></canvas>
<div class='card' id='card'>
 <h1>Will you be mine forever?</h1><p style="margin:10px 0 0; font-weight:900; color:#7a1236;">From: Ravi &nbsp;‚Üí&nbsp; To: Dharani</p>
 <p>‚Äî Sri (Bubu)</p>
 <div class='caption' id='caption'>Go on‚Ä¶ choose wisely üòâ</div>
 <div class='play' id='play'>
   <button class='heart-btn' id='yes'>
     <div class='heart' style='--c:#e53935'></div>
     <div class='label'>Yes</div>
   </button>
   <button class='heart-btn' id='no'>
     <div class='heart' style='--c:#2ecc71'></div>
     <div class='label'>No</div>
   </button>
 </div>
</div>

<div id='loveWrap'>
  <div class='letter' id='letterBox'>
    <div id="step1">
      <h2>Yayyy!! üéâüíñ</h2>
      
      <p style="margin-top:10px; font-size:18px; color:#c2185b; font-weight:800;">
        Hey Dudu üíó Today was the start of our beautiful journey ‚Äî a day I‚Äôll cherish forever.
      </p>
<p style="margin-top:6px;">You chose <b>YES</b> ‚Äî now type the password (DDMMYYYY) to unlock the love letter.</p>

      <div class='inputRow' style="margin-top:14px;">
        <div style="position:relative; width:240px; max-width:70vw;"><input id='date' type='password' inputmode='numeric' pattern='[0-9]*' maxlength='8' autocomplete='off' placeholder='Password (DDMMYYYY)' style="width:100%; padding-right:42px;"/><button type="button" id="togglePw" aria-label="Show password" style="position:absolute; right:6px; top:50%; transform:translateY(-50%); border:none; background:transparent; font-size:18px; cursor:pointer;">üëÅÔ∏è</button></div>
        <button id='reveal'>Unlock ‚ú®</button>
      </div>

      <div id='secret' class='secret' style="display:none;"></div>
    </div>

    
<div id="step2" style="display:none;">
  <h2>My Love Letter üíå</h2>

  <div class="envelope-stage">
    <div class="envelope" id="envelope">
      <div class="env-back"></div>
      <div class="env-bottom"></div>
      <div class="env-flap"></div>
      <div class="env-heart"></div>

      <div class="letter-sheet" id="letterSheet">
        <div id="typedLetter" style="text-align:left; min-height:120px;"></div>

        <div style="margin-top:14px; display:flex; justify-content:center;">
          <img src="./letter.jpg" alt="Special photo" style="width:260px; max-width:78vw; border-radius:16px; box-shadow:0 10px 26px rgba(0,0,0,.18);">
        </div>

        <p style="margin-top:12px; font-weight:900; color:#c2185b;">‚Äî Your Bubu üíó</p>
      </div>
    </div>
  </div>

  <p style="margin-top:12px; color:#7a1236; font-weight:800;">
    Tap the envelope to open it üíó
  </p>
</div>

  </div>
</div>

</div>
</div>

<script>
function spawn(){
 for(let i=0;i<5;i++){
   const h=document.createElement('div');h.className='float-heart';
   h.style.left=(5+Math.random()*90)+'vw';h.style.top='100vh';
   h.style.animationDuration=(5+Math.random()*5)+'s';
   document.body.appendChild(h);setTimeout(()=>h.remove(),12000);
 }
}
spawn();setInterval(spawn,1200);

const no=document.getElementById('no');
const yes=document.getElementById('yes');
const cap=document.getElementById('caption');
const play=document.getElementById('play');
const loveWrap=document.getElementById('loveWrap');
const input=document.getElementById('date');
const reveal=document.getElementById('reveal');
const secret=document.getElementById('secret');

const togglePw = document.getElementById('togglePw');
if(togglePw){
  togglePw.addEventListener('click',()=>{
    if(input.type==='password'){input.type='text'; togglePw.textContent='üôà';}
    else{input.type='password'; togglePw.textContent='üëÅÔ∏è';}
  });
}
const caps=["Hehe nope üòÜ","Catch me! üòú","Only YES allowed üòù","Try again cutie üíó","You can't escape üòá","Ayy stop chasing me ü§≠"];

function moveNo(){
 no.style.position='fixed';no.style.zIndex='9999';
 const bw=no.offsetWidth,bh=no.offsetHeight;
 const x=Math.random()*(window.innerWidth-bw-20)+10;
 const y=Math.random()*(window.innerHeight-bh-20)+10;
 no.style.left=x+'px';no.style.top=y+'px';
 cap.textContent=caps[Math.floor(Math.random()*caps.length)];
}
['mouseenter','pointerdown','touchstart','click'].forEach(ev=>{
 no.addEventListener(ev,e=>{e.preventDefault();moveNo();},{passive:false});
});
play.addEventListener('mousemove',e=>{
 const r=no.getBoundingClientRect();
 const dx=e.clientX-(r.left+r.width/2), dy=e.clientY-(r.top+r.height/2);
 if(Math.hypot(dx,dy)<120) moveNo();
});

// Confetti popper
const c=document.getElementById('confetti');
const ctx=c.getContext('2d');
function resize(){c.width=innerWidth;c.height=innerHeight;} resize(); addEventListener('resize',resize);
function confetti(n=250){
  const parts=[];
  for(let i=0;i<n;i++){
    parts.push({x:innerWidth/2,y:innerHeight/2,vx:(Math.random()*6-3),vy:(Math.random()*-6-2),g:0.12,r:Math.random()*2*Math.PI,spin:(Math.random()*0.2-0.1),size:4+Math.random()*6,color:['#ff174e','#ffb703','#06d6a0','#4361ee','#ff5d8f','#8338ec'][Math.floor(Math.random()*6)]});
  }
  const start=performance.now();
  (function draw(t){
    ctx.clearRect(0,0,c.width,c.height);
    parts.forEach(p=>{p.vy+=p.g;p.x+=p.vx;p.y+=p.vy;p.r+=p.spin;ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r);ctx.fillStyle=p.color;ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size);ctx.restore();});
    if(t-start<1800) requestAnimationFrame(draw); else ctx.clearRect(0,0,c.width,c.height);
  })(start);
}

yes.addEventListener('click',()=>{
  confetti(260);
  document.getElementById('card').innerHTML = ""+
  "<h1>Yayyy!! üéâüíñ</h1>"+
  "<p>‚Äî Sri (Bubu)</p>"+
  "<p style='margin-top:10px;color:#c2185b;font-weight:700'>Hey Dudu üíó This was the start of our beautiful journey. Now type the password (DDMMYYYY) to open the love letter.</p>";
  loveWrap.style.display='flex';
});

function burstSparks(n=22){
  for(let i=0;i<n;i++){
    const s=document.createElement('div');
    s.className='spark';
    const angle=Math.random()*Math.PI*2;
    const dist=40+Math.random()*120;
    s.style.setProperty('--dx', Math.cos(angle)*dist+'px');
    s.style.setProperty('--dy', Math.sin(angle)*dist+'px');
    s.style.left=(innerWidth/2)+'px';
    s.style.top=(innerHeight/2)+'px';
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),1000);
  }
}


function typeLetter(lines, el, speed=22){
  el.innerHTML = '';
  let lineIndex = 0;
  let charIndex = 0;

  const cursor = document.createElement('span');
  cursor.className = 'typed-cursor';
  cursor.textContent = '|';

  let p = document.createElement('p');
  p.style.margin = '6px 0';
  p.style.lineHeight = '1.65';
  p.style.color = '#2b0b18';
  el.appendChild(p);
  el.appendChild(cursor);

  function tick(){
    if(lineIndex >= lines.length){
      cursor.remove();
      return;
    }
    const line = lines[lineIndex];

    if(charIndex <= line.length){
      p.textContent = line.slice(0, charIndex);
      charIndex++;
      setTimeout(tick, speed);
    } else {
      lineIndex++;
      charIndex = 0;

      if(lineIndex < lines.length){
        p = document.createElement('p');
        p.style.margin = '6px 0';
        p.style.lineHeight = '1.65';
        p.style.color = '#2b0b18';
        el.insertBefore(p, cursor);
      }
      setTimeout(tick, speed);
    }
  }
  tick();
}

const ACCEPT = '16042025';
const step1 = document.getElementById('step1');
const step2 = document.getElementById('step2');

reveal.addEventListener('click',()=>{
  const v=(input.value||'').trim();
  secret.style.display='block';

  if(v === ACCEPT){
    secret.style.display='none';
    step1.style.display='none';
    step2.style.display='block';
confetti(420);
burstSparks(34);

const env = document.getElementById('envelope');
const typed = document.getElementById('typedLetter');

const lines=[
  'My Love,',
  'Since 11-05-2016, you became my forever person.',
  'You are my happiness, my peace, my safe place.',
  'No matter what happens, it will always be you and me.',
  'I love you endlessly ‚ù§Ô∏è'
];

// reset envelope state
if(env) env.classList.remove('open');
if(typed) typed.innerHTML='';

// Open envelope on click (or auto-open after a tiny delay)
function openEnvelope(){
  if(!env) return;
  env.classList.add('open');
  confetti(220);
  burstSparks(18);
  if(typed) typeLetter(lines, typed, 22);
}

if(env){
  env.onclick=openEnvelope;
  setTimeout(openEnvelope, 600); // auto-open for wow effect
}else{
  // fallback
  if(typed) typeLetter(lines, typed, 22);
}
} else {
    secret.textContent='Wrong password baby üòù Try the code in DDMMYYYY format ‚ù§Ô∏è';
  }
});

// --- Music (user-provided MP3: demaiana-sakhi.mp3) ---
const bgMusic = document.getElementById('bgMusic');
const musicToggle = document.getElementById('musicToggle');

function startMusic(){
  if(!bgMusic) return;
  bgMusic.volume = 0.7;
  bgMusic.play().then(()=>{
    if(musicToggle) musicToggle.textContent = "üéµ Music On";
  }).catch(()=>{
    if(musicToggle) musicToggle.textContent = "üéµ Tap to play";
  });
}
function stopMusic(){
  if(!bgMusic) return;
  bgMusic.pause();
  if(musicToggle) musicToggle.textContent = "üîá Music Off";
}

if(typeof yes !== 'undefined' && yes){
  yes.addEventListener('click', startMusic);
}
if(musicToggle){
  musicToggle.addEventListener('click', ()=>{
    if(!bgMusic) return;
    if(bgMusic.paused) startMusic();
    else stopMusic();
  });
}
document.addEventListener('touchend', ()=>{
  if(bgMusic && bgMusic.paused) startMusic();
}, {once:true});

</script>
</body>
</html>
